<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<meta name="GENERATOR" content="Microsoft&reg; HTML Help Workshop 4.1">
<meta http-equiv='Content-Type' content='text/html;charset=Shift_JIS'>
<meta http-equiv='Content-Style-Type' content='text/css'>
<link rel="stylesheet" type="text/css" href="help.css">
<Title>改訂履歴</Title>
</HEAD>
<BODY>

<!-- header start -->
<div id='header'>
<h1>NSDL（NES Sound Driver Library）</h1>
<a href="index.html">トップ</a>＼
</div>

<!-- contents start -->
<div id='contents'>
<h2>改訂履歴（Revision）</h2>

<div class='block'>
<h3>改訂履歴</h3>
<p>
</p>
<table>
<tr><th>ヴァージョン</th><th>内容</th><th>改定日</th></tr>
<tr><td>1.01</td>
	<td>●音源ドライバー本体<br>
		・nsd_all.bin 及び nsd_all2.bin にて、⊿PCMのバンク切り替え及びIRQに対応した。<br>
		●取扱説明書<br>
		・各.lib/.binの仕様の説明を追加した。<br>
	<td>2013年 2月15日</td></tr>
<tr><td>1.00</td>
	<td>●音源ドライバー本体<br>
		・一時停止関数（nsd_pause_bgm()）及び、再生再開関数（nsd_resume_bgm()）を実装した。<br>
		・nsd_stop_bgm()関数で再生停止したときに発音中の音があった場合、鳴りっぱなしになっていたバグを修正。<br>
		●ＭＭＬコンパイラ<br>
		・マクロに対応した。<br>
		・疑似エコーに、スラーで繋げるモードを追加した。<br>
		・リピート(A)コマンドにて、リピート回数をどちらにも記述できるようにした。<br>
		・アセンブリ言語ソースを出力する際に、数値が3桁毎にカンマが出てしまっていたバグを修正。<br>
		・#SegmentPCMコマンドが機能していなかったバグを修正。<br>
		・#SegmentPCMコマンドにて""を指定した際、アセンブリ言語で⊿PCMの実体を出力しないようにした。<br>
		●取扱説明書<br>
		・これまでに質問があった内容を、ＦＡＱに記載しました。<br>
		・その他、色々と見直しました。<br>
		●その他<br>
		・アセンブリ言語から nsd.lib を制御するサンプルソースを作った。<br></td>
	<td>2013年 2月 9日</td></tr>
</table>
</div>

<div class='block'>
<h3>改訂履歴（α・β版）</h3>
<p>
</p>
<table>
<tr><th>ヴァージョン</th><th>内容</th><th>改定日</th></tr>
<tr><td>0.27β</td>
	<td>●音源ドライバー本体<br>
		・使用するＲＡＭの量を若干減らした。<br>
		●ＭＭＬコンパイラ<br>
		・TRコマンドにて複数トラックの指定に対応した。<br></td>
	<td>2013年 1月18日</td></tr>
<tr><td>0.26β</td>
	<td>●音源ドライバー本体<br>
		・拡張音源使用時に、使用するＲＡＭの量を若干減らした。<br>
		●ＭＭＬコンパイラ<br>
		・#timebase コマンドを実装した。<br></td>
	<td>2013年 1月11日</td></tr>
<tr><td>0.25β</td>
	<td>●音源ドライバー本体<br>
		・FDSに対応。<br>
		・BGMから、SE（効果音）を呼べるようにした。<br>
		・効果音発音終了時に、BGMへうまく復帰できていなかったバグを修正。<br>
		●ＭＭＬコンパイラ<br>
		・FDS関連のコマンド群を実装した。<br>
		・SEを呼ぶコマンド SE を実装した。<br></td>
	<td>2013年 1月10日</td></tr>
<tr><td>0.24β</td>
	<td>●ＭＭＬコンパイラ<br>
		・#offsetE@, #offsetEv, #offsetEm, #offsetEnコマンドを追加した。<br>
		●取扱説明書<br>
		・Spcial Thanksを追加しました。<br>
		・VRC7の音色について、また、少し数学的な解説を追記した。<br></td>
	<td>2013年 1月 5日</td></tr>
<tr><td>0.23β</td>
	<td>●ＭＭＬコンパイラ<br>
		・エンベロープ定義で、(<var>start</var>,<var>end</var>,<var>length</var>)の指定をできるようにした。<br>
		●取扱説明書<br>
		・VRC7の音色パラメータについて、少し解説を追記した。<br>
		・nsd_oall.binの仕様を記載（書き忘れていた）。</td>
	<td>2012年12月22日</td></tr>
<tr><td>0.22β</td>
	<td>●ＭＭＬコンパイラ<br>
		・gccでコンパイルできるように、ソースを修正。<br>
		　（Ｃ++の機能だけを使っているつもりが、Visual C++の機能を使っていた。）<br>
		●その他<br>
		・修正ＢＳＤライセンス（但しNSFデータは除外）に変更しました。<br>
	<td>2012年12月 1日</td></tr>
<tr><td>0.21β</td>
	<td>●音源ドライバー本体<br>
		・OPLLのリズム音源の仕様を変更。音程を持たせれるようにした。<br>
		・OPLLのリズム音源がちゃんとなってなかったバグをFix。<br>
		・曲頭の休符に、通常の休符を使うと不要な音が鳴ってしまっていた仕様を改善。鳴らなくした。<br>
	<td>2012年11月19日</td></tr>
<tr><td>0.20β</td>
	<td>●音源ドライバー本体<br>
		・ノートナンバー64以降の⊿PCMの定義が適用されていなかったバグを修正。<br>
		・OPLLに対応（改造VRC7搭載カートリッジ）。<br>
		●ＭＭＬコンパイラ<br>
		・⊿PCMを使う曲をnsfにビルドする際に、少しファイルサイズが小さくなるようにした。<br>
		●取扱説明書<br>
		・疑似エコー及び、制御トラックが説明不足だった点を加筆。</td>
	<td>2012年11月13日</td></tr>
<tr><td>0.19β</td>
	<td>●音源ドライバー本体<br>
		・"nsd_all.bin"に、音源に割り当てないトラックを設けた。<br>
		　テンポコマンドや、n106/163とVRC7の音色設定等の設定トラックとして使用可能です。<br>
		・いつの間にか、効果音がならなくなっていたバグを修正。<br>
		●ＭＭＬコンパイラ<br>
		・疑似エコー（MMLコンパイラ側の命令です）を実装しました。<br>
		・範囲コメントの終端 */ の直後（スペースを空けず）に記述したコマンドが認識されなかったバグを修正。<br>
		●取扱説明書<br>
		・ちょっと見やすさを考えてみた。</td>
	<td>2012年11月12日</td></tr>
<tr><td>0.18β</td>
	<td>●音源ドライバー本体<br>
		・Sunsoft 5Bに対応。<br>
		・Rm0コマンドで、⊿PCMが指定音長でKeyOffされなかったバグをFix。<br>
		●ＭＭＬコンパイラ<br>
		・バンクが不連続に配置されたnsfに非対応の実機再生環境に対応（TNS-HFC3など）。<br>
		●取扱説明書<br>
		・Rm0コマンドで、⊿PCMが指定音長でKeyOffされる旨を記載（書き忘れていた）。</td>
	<td>2012年10月22日</td></tr>
<tr><td>0.17β</td>
	<td>●音源ドライバー本体<br>
		・n163にて、アドレス$40番地以降（@命令にて32に相当するアドレス）の波形データを破壊してしまっていたバグを修正。<br>
	<td>2012年10月19日</td></tr>
<tr><td>0.16β</td>
	<td>●音源ドライバー本体<br>
		・Version 0.10β～0.15βにて、実機で鳴らなくなっていた不具合を修正。<br>
		●取扱説明書<br>
		・n163の使い方の解説ページを追加。</td>
	<td>2012年10月15日</td></tr>
<tr><td>0.15β</td>
	<td>●音源ドライバー本体<br>
		・n163に対応。</td>
	<td>2012年10月11日</td></tr>
<tr><td>0.14β</td>
	<td>●音源ドライバー本体<br>
		・色々と拡張音源を実装するに当たり、改めてコードを再確認。無駄なコードを省いて若干最適化した。<br>
		・nsd_all.binを作った。現状、内蔵音源及びVRC6 VRC7 MMC5のみに対応です。<br>
		●取扱説明書<br>
		・取説を見直して、若干、再構成した。<br></td>
	<td>2012年10月 6日</td></tr>
<tr><td>0.13β</td>
	<td>●音源ドライバー本体<br>
		・VRC7に対応。</td>
	<td>2012年10月 3日</td></tr>
<tr><td>0.12β</td>
	<td>●音源ドライバー本体<br>
		・⊿PCMの休符の処理で、r,r+ の挙動と、 r- の挙動が逆になってたバグをFix。</td>
	<td>2012年10月 2日</td></tr>
<tr><td>0.11β</td>
	<td>●音源ドライバー本体<br>
		・VRC6に対応。<br>
		・MMC5に対応。</td>
	<td>2012年10月 1日</td></tr>
<tr><td>0.10β</td>
	<td>●音源ドライバー本体<br>
		・⊿PCMに対応。<br>
		●ＭＭＬコンパイラ<br>
		・⊿PCM対応により、DPCM{}記述ブロックが増えました。<br>
		・TR5の各音階に、⊿PCMを割り当てることができます。<br>
		●取扱説明書<br>
		・「索引」と「検索」を実装した。<br></td>
	<td>2012年 9月30日</td></tr>
<tr><td>0.07α</td>
	<td>●音源ドライバー本体<br>
		・⊿PCMルーチンを開発中（未デバッグです）。<br>
		●ＭＭＬコンパイラ<br>
		・コンパイルオプションで、NSF用の実行コード(*.bin)を指定できるようにした。<br>
		・nsfにコンパイルする場合において、実行コードを0xE000番地から0x8000番地に変更した。<br>
		　これにより、⊿PCMが実装できれば、合計16KByte（0xC000～0xFFFF番地）使えるようになります。<br>
		・"#offsetPCM"コマンドを実装。曲データはこのアドレス-1までの領域とし、これ以後を⊿PCMの領域として割り当てます。<br>
		・それに伴い、シーケンスデータが"#offsetPCM"コマンドで指定したアドレスを超えた場合に、エラーを吐くようにした。<br>
		　（シーケンスデータが32kByteを超えると、コンパイラがハングするバグがありました。）<br>
		・アセンブリ言語出力に対応した。<br>
		・また、それに伴い、出力するアセンブリ言語に対して、各種設定するコマンドを実装。<br>
		・アセンブリ言語出力に対応したので、アーカイブ中の"\sample\cc65\"のサンプルＣ言語コードも書き直しました。<br>
	<td>2012年 9月25日</td></tr>
<tr><td>0.06α</td>
	<td>●音源ドライバー本体<br>
		・ポルタメントに対応した。<br>
		●ＭＭＬコンパイラ<br>
		・エンベロープ・サブルーチンにおいて、0～4294967295番まで指定できるようにした（以前は0～65535番でした）。<br>
		・エンベロープのパターン定義において、Lコマンドを省略できるようにした。<br>
		・エンベロープのパターン定義において、音源ドライバが暴走するようなパターン定義の場合、エラーを吐くようにした。<br>
		・K{}コマンド（調号）により、r（休符）にも自動で調号（キーオフのモード指定）を付けられるようにした。<br>
		●取扱説明書<br>
		・休符や、エンベロープについて説明が足りていなかったので、追記した。<br>
		・ＦＡＱのページを作成した。</td>
	<td>2012年 9月17日</td></tr>
<tr><td>0.05α</td>
	<td>●音源ドライバー本体<br>
		・効果音処理ルーチンを開発中（一応、効果音が使えるようになってますが、未デバッグです）。<br>
		●取扱説明書<br>
		・BGM,SEデータフォーマット（Format of BGM and SE）のページにおいて、エンベロープがまだ実装されていないことになっていた記述を修正。<br>
		●ＳＤＫ<br>
		・アセンブリ言語及び、Ｃ言語用のヘッダーファイルを作成した。"include"フォルダを参照。<br>
		●ＭＭＬコンパイラ<br>
		・音名・休符コマンドに、付点のみを指定できなかったバグを修正。</td>
	<td>2012年 9月12日</td></tr>
<tr><td>0.04α</td>
	<td>●取扱説明書<br>
		・主に、ノイズチャンネル関連の説明が不足していた点を加筆。<br>
		●ＭＭＬコンパイラ<br>
		・0及び9から始まる音長を、コンパイルできなかったバグを修正（水平展開できてなかった）。<br>
		・音長で0を指定すると、例外が発生して異常終了するバグを修正。</td>
	<td>2012年 9月 7日</td></tr>
<tr><td>0.03α</td>
	<td>●音源ドライバー本体<br>
		・エンベロープを４系統実装した。<br>
		●ＭＭＬコンパイラ<br>
		・オクターブの設定値が１つ高かったバグを修正。<br>
		・0及び9から始まる数値を、コンパイルできなかったバグを修正。<br>
		・サブルーチン番号で128を超えた場合に、コンパイルできないことがあったバグを修正。<br>
		・トラック先頭に L コマンドを書いた場合、無限ループされないコードにコンパイルしていたバグを修正。</td>
	<td>2012年 9月 6日</td></tr>
<tr><td>0.02α</td>
	<td>●音源ドライバー本体<br>
		・休符時の音量の状態が設計どおりで無かったバグを修正。<br>
		・サブルーチンからの復帰時に、戻り先のアドレスがずれていたバグを修正。<br>
		・リピート(A)命令でリピートされなかったバグを修正。<br>
		・リピート(B)命令をもう１系統作った。（op-code 0x18～0x1A）<br>
		・音色命令を追加（op-code 0x1B）。この命令は、音色エンベロープと排他的に使用できる予定です。<br>
		●ＭＭＬコンパイラ<br>
		・作りました。</td>
	<td>2012年 9月 3日</td></tr>
<tr><td>0.01α</td>
	<td>α版です。<br>
		どこまで動くかは分からないが、評価版として公開。<br>
		まずは、音源ドライバーを設計。<br>
		効果音はまだ実装していませんので、効果音関係の関数は呼ばないでください。<br></td>
	<td>2012年 8月10日</td></tr>
</table>
</div>
</div>

</BODY>
</HTML>
