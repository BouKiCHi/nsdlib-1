; Listing generated by Microsoft (R) Optimizing Compiler Version 13.10.3077 

	TITLE	.\mml_repeat.cpp
	.386P
include listing.inc
if @Version gt 510
.model FLAT
else
text$yc	SEGMENT PARA USE32 PUBLIC 'CODE'
text$yc	ENDS
;	COMDAT _$E1
text$yc	SEGMENT PARA USE32 PUBLIC 'CODE'
text$yc	ENDS
;	COMDAT ??_7mml_repeat@@6B@
CONST	SEGMENT DWORD USE32 PUBLIC 'CONST'
CONST	ENDS
FLAT	GROUP _DATA, CONST, _BSS
	ASSUME	CS: FLAT, DS: FLAT, SS: FLAT
endif

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_7mml_repeat@@6B@				; mml_repeat::`vftable'
;	COMDAT ??_7mml_repeat@@6B@
CONST	SEGMENT
??_7mml_repeat@@6B@ DD FLAT:?getCode@MusicItem@@UAEXPAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z ; mml_repeat::`vftable'
	DD	FLAT:?setCode@MusicItem@@UAEXPAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z
	DD	FLAT:?getAsm@MusicItem@@UAEXPAVMusicFile@@@Z
PUBLIC	?set_count@mml_repeat@@QAEXE@Z			; mml_repeat::set_count
; Function compile flags: /Ogsy
; File f:\nes\nsdl\src\nsc\mml_repeat.cpp
_TEXT	SEGMENT
?set_count@mml_repeat@@QAEXE@Z PROC NEAR		; mml_repeat::set_count
; _this$ = eax
; _count$ = ecx

; 51   : 	code[1] = count;

  00000	83 78 2c 10	 cmp	 DWORD PTR [eax+44], 16	; 00000010H
  00004	72 05		 jb	 SHORT $L55342
  00006	8b 40 18	 mov	 eax, DWORD PTR [eax+24]
  00009	eb 03		 jmp	 SHORT $L55343
$L55342:
  0000b	83 c0 18	 add	 eax, 24			; 00000018H
$L55343:
  0000e	88 48 01	 mov	 BYTE PTR [eax+1], cl

; 52   : }

  00011	c3		 ret	 0
?set_count@mml_repeat@@QAEXE@Z ENDP			; mml_repeat::set_count
PUBLIC	??1mml_repeat@@QAE@XZ				; mml_repeat::~mml_repeat
; Function compile flags: /Ogsy
_TEXT	SEGMENT
??1mml_repeat@@QAE@XZ PROC NEAR				; mml_repeat::~mml_repeat
; _this$ = ecx

; 39   : }

  00012	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET FLAT:??_7MusicEvent@@6B@
  00018	e9 00 00 00 00	 jmp	 ??1MusicItem@@QAE@XZ	; MusicItem::~MusicItem
??1mml_repeat@@QAE@XZ ENDP				; mml_repeat::~mml_repeat
_TEXT	ENDS
PUBLIC	??0mml_repeat@@QAE@QBG@Z			; mml_repeat::mml_repeat
$T84311	DD	0ffffffffH
	DD	FLAT:$L84287
$T84309	DD	019930520H
	DD	01H
	DD	FLAT:$T84311
	DD	2 DUP(00H)
	DD	2 DUP(00H)
; Function compile flags: /Ogsy
_TEXT	SEGMENT
__$EHRec$ = -12						; size = 12
_this$ = 8						; size = 4
__strName$ = 12						; size = 4
??0mml_repeat@@QAE@QBG@Z PROC NEAR			; mml_repeat::mml_repeat

; 23   : {

  0001d	b8 00 00 00 00	 mov	 eax, __ehhandler$??0mml_repeat@@QAE@QBG@Z
  00022	e8 00 00 00 00	 call	 __EH_prolog
  00027	56		 push	 esi
  00028	8b 75 08	 mov	 esi, DWORD PTR _this$[ebp]
  0002b	57		 push	 edi
  0002c	ff 75 0c	 push	 DWORD PTR __strName$[ebp]
  0002f	e8 00 00 00 00	 call	 ??0MusicEvent@@QAE@QBG@Z ; MusicEvent::MusicEvent
  00034	83 65 fc 00	 and	 DWORD PTR __$EHRec$[ebp+8], 0

; 24   : 	iSize = 2;

  00038	6a 02		 push	 2
  0003a	58		 pop	 eax

; 25   : 	code.resize(iSize);

  0003b	8d 7e 14	 lea	 edi, DWORD PTR [esi+20]
  0003e	6a 00		 push	 0
  00040	8b cf		 mov	 ecx, edi
  00042	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET FLAT:??_7mml_repeat@@6B@
  00048	89 46 30	 mov	 DWORD PTR [esi+48], eax
  0004b	e8 00 00 00 00	 call	 ?resize@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAEXID@Z ; std::basic_string<char,std::char_traits<char>,std::allocator<char> >::resize

; 26   : 	code[0] = nsd_Repeat_A_Start;

  00050	83 7f 18 10	 cmp	 DWORD PTR [edi+24], 16	; 00000010H
  00054	72 05		 jb	 SHORT $L84303
  00056	8b 7f 04	 mov	 edi, DWORD PTR [edi+4]
  00059	eb 03		 jmp	 SHORT $L84304
$L84303:
  0005b	83 c7 04	 add	 edi, 4
$L84304:

; 27   : }

  0005e	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00061	c6 07 03	 mov	 BYTE PTR [edi], 3
  00064	5f		 pop	 edi
  00065	8b c6		 mov	 eax, esi
  00067	5e		 pop	 esi
  00068	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:__except_list, ecx
  0006f	c9		 leave
  00070	c2 08 00	 ret	 8
$L84287:
  001c5	8b 4d 08	 mov	 ecx, DWORD PTR _this$[ebp]
  001c8	e9 00 00 00 00	 jmp	 ??1MusicEvent@@QAE@XZ	; MusicEvent::~MusicEvent
__ehhandler$??0mml_repeat@@QAE@QBG@Z:
  001cd	b8 00 00 00 00	 mov	 eax, OFFSET FLAT:$T84309
  001d2	e9 00 00 00 00	 jmp	 ___CxxFrameHandler
??0mml_repeat@@QAE@QBG@Z ENDP				; mml_repeat::mml_repeat
END
