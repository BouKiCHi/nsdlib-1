#title		"MML Test"
#include	"test1.mml"

#Code		"../../bin/nsd.bin"

#BGM		6
#SE			0

bgm(5){
	TR1	y$400F,10	u1-4.+%1		|: s9,7	c2	s9,15	^2 s0,8	\ d1  :|  e1 :| f1 l8  |: [2 c ] \ [2 d ] :| [2 e ] c1
}

//----------------------------------------------
//	W.A.Mozart	"Ave Verum Corpus"	K.v.618		※弦楽器パートだけ！！
//----------------------------------------------
bgm(0){
	TR1	o4 l4 q2 v11Rm1	Rv6	R@2	t60	K{+fc}	@3
	TR2	o4 l4 q2 v8	Rm1	Rv6	R@2		K{+fc}	@3
	TR3	o3 l4 q1					K{+fc}	

	TR1		 d&"a&d&e	| f&d&f&g	| a&f `d&f	| a&g+&g g	| g&b&a&g	| g&f	f&a
	TR2		"a2.&c4		| d&"a&d&e	| f2.	d	| e2 e2		| e&g&f&e	| e&d	d2
	TR3		 f2.&a4		| a&f&a a	| a2	a2	| b2 b2		| a2	a2	| a2	a2

	TR1		a&e	e&a	| a&>f g<g	|	g2&f2	| e&c	c&e		| e&>e c&<a	|	a&g+	g&e
	TR2		c2.	e	| f&>d e<e	|	e2&d2	| c&<a	a&>c	| c2.	c	|	c&d		d2
	TR3		a2.>c	| d2<	a2	|	a1		| a&e	e&a		| a2>	e2	|	e2		e2

	TR1		e&>e  d&<b	| b&a	aa&	|>d	d2	d		| ^&c<b&a	| "b&a	"b&g+	| "a a&>	e2
	TR2		"b2.	g+	| g+&a	a2	| r- <a&g+&>g+	| a2f2		| e2	d2		| c2.	e&
	TR3		e2.&	d	| d&c	c2	| r  <a&g+& b>	| e2 d&c<	| b2.	 b		| a2.>	c

	TR1		^&d& e&f<	| a2-8 `c8&b4.&a8	| a&e	c&e		| a&e	c&a	| a&b-	b-b-	| b-&>d&	c=&<b-
	TR2		a	a2	a	| c&e	d&e			| c2	"a&c	| e2.	e	| e2	e2		| e2.		e
	TR3		^&d&c&"b	| e2<	g+2			| a2	e&a	>	| c2.	c	| c2.	c=		| c=&<b-&	a&g

	TR1		b-&a	a&<a	| g&>d	g&"b	| c b-&	a&g		| g2	f=8&e8& f=	| e  c&d& e
	TR2		e&f=	f=2		| d2.	g		| g&f=&	e e		| e2	d8&c8&  d	| c <a&b&>c
	TR3		g&a		a2		| b2.	`d		| g&b&	e&>c	| c2&	d&<b		| e a2	a	

	TR1		f2.	f	| f&e& d&g	| g2.	g		| g&f&e&a	| a2.	a
	TR2		d2.	d	| d&c&"b&d	| e2.	e		| e&d&c&f	| f2.	f
	TR3		a2	d2	| b2.	b	| b&a&	g&>c	| c2.	c	| c&<b&a&>d

	TR1		a&g&a&b	| f2 e4.f8	|	g g2 g&	|>d d2 d		| ^ d&d+ d+&	| e&"b&c&d
	TR2		f&g&f&e	| d2	c2	|	d2	r-2	| r- "b&c=&f&	| g "b-&c=&f	| "b&d&c&"b
	TR3		d2.	d<	| a2	a2	|	d2	r-2	| r- b&>c=&f&	| g "b-&c=&f	| "b&d&c&<b

	TR1		c& <b8&a8 `d4&g4	| f2&	e2	| d&f	a2	| ^& d	g2	| f2 l32 [8 :	t_-2 f& t_-2 e&	] t_-4 d& t_-8 e,32 t40	|	d1
	TR2		e&  d8&c8 d2		| d2&	c2	| d2&	f2	| ^&"b	e2	| ^& d2& c	|	d1
	TR3		a2.			g		| a2&	g2	| f2	ra&	| `d2.	b	| a2	g2	|	f1

}




//A-Dur Key Signature test
//そして、D-Durに移調するテスト
//そのまま、B-Durにいってみよう！　最後は、 rit もしてみる。
//かつ、いきなり、TR3を指定するテスト
bgm(1){
	TR3	K{+fcg} t80 u16. l8	<a4,8.	b>cdefg a1,2..
		K{=g}				d4,8.	efgab>c d1,2..<
		K{=fc-be}			"b4,8.	cdef t_-10 g t_-10 a& t_-20 b1,2
}


/*
エンベロープの実装は、まず、音源ドライバーに実装されている機能を全て、
ＭＭＬコンパイラでコンパイルできるようになってから、実装予定ですよ。

と、範囲コメントを書く、テスト。
*/

Sub(100){
	u16. l8	c4,8.. defgab b%1&> c1-%1,2..
}


//Cent base の Detune
bgm(2){
	TR1		t83			S100
	TR2	r-16. ((((((D-2	S100
}

//Register base の Detune
bgm(3){
	TR1		t83			S100
	TR2	r-16. ((((((D%1	S100
}

//移調テスト
bgm(4){
	TR1	t180	l4	_-4 c __1 c __1 c __1 c __1 c _12 c
}

